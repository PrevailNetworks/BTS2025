<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BTS2025 • All Reports</title>
  <!-- Tailwind CDN for quick testing -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background:
        url('assets/images/truistpark2.jpg') no-repeat center/cover,
        rgba(0,0,0,0.85);
      background-blend-mode: overlay;
      min-height: 100vh;
      color: #FFF;
    }
  </style>
</head>
<body class="relative">
  <div class="relative z-10 container mx-auto p-8">
    <header class="text-center mb-12">
      <h1 class="text-5xl font-black tracking-tight">BEAT THE STREAK</h1>
      <p class="text-gray-400 mt-2">
        All Reports • Click any card to view Picks, Infographic, or Full Analysis
      </p>
    </header>

    <!-- Responsive grid: centered until large, then left-aligned -->
    <div
      id="reports"
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8
             justify-items-center lg:justify-items-start"
    >
      <!-- Cards get injected here by JS -->
    </div>

    <footer class="text-center text-gray-400 text-sm mt-16">
      <p>Powered by GitHub’s API. Confirm lineups on MLB.com.</p>
    </footer>
  </div>

  <script>
  (async () => {
    const container = document.getElementById('reports');
    const res = await fetch('https://api.github.com/repos/PrevailNetworks/BTS2025/contents?ref=main');
    const files = await res.json();

    // Group picks, infographics, and full reports by date prefix
    const reports = files
      .filter(f => /-(picks|ig|report)\.html$/.test(f.name))
      .reduce((acc, f) => {
        const [datePart, type] = f.name.split('-');
        acc[datePart] = acc[datePart] || {};
        if (type.startsWith('picks'))     acc[datePart].picks  = f.name;
        else if (type.startsWith('ig'))   acc[datePart].ig     = f.name;
        else if (type.startsWith('report')) acc[datePart].report = f.name;
        return acc;
      }, {});

    // Sort newest-first
    const sortedDates = Object.keys(reports).sort((a,b) => b.localeCompare(a));

    // Render a card per date
    for (const datePart of sortedDates) {
      const { picks, ig, report } = reports[datePart];
      const displayDate =
        `${datePart.slice(0,2)}/${datePart.slice(2,4)}/20${datePart.slice(4)}`;

      const card = document.createElement('div');
      card.className = [
        'bg-gray-900/60','border','border-gray-700','rounded-lg','p-6',
        'flex','flex-col','justify-between',
        'transition-transform','transform','hover:-translate-y-1','hover:shadow-xl'
      ].join(' ');

      card.innerHTML = `
        <div>
          <h2 class="text-xl font-bold mb-2 text-lime-400">${displayDate}</h2>
          <p class="text-gray-300 mb-4">Daily Picks & Infographic</p>
        </div>
        <div class="space-x-2">
          ${picks  ? `<a class="inline-block bg-lime-500 text-black font-semibold px-4 py-2 rounded hover:bg-lime-600" href="${picks}">Picks</a>`        : ''}
          ${ig     ? `<a class="inline-block bg-blue-600 text-white font-semibold px-4 py-2 rounded hover:bg-blue-700" href="${ig}">Infographic</a>`     : ''}
          ${report ? `<a class="inline-block bg-purple-600 text-white font-semibold px-4 py-2 rounded hover:bg-purple-700" href="${report}">Full Analysis</a>` : ''}
        </div>
      `;

      container.appendChild(card);
    }
  })()
  .catch(err => {
    console.error(err);
    document.getElementById('reports').innerText =
      '⚠️ Could not load reports. See console for details.';
  });
  </script>
</body>
</html>
